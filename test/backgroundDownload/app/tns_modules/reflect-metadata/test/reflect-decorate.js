// Reflect.decorate ( decorators, target [, propertyKey [, descriptor] ] )
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("../Reflect");
var chai_1 = require("chai");
describe("Reflect.decorate", function () {
    it("ThrowsIfDecoratorsArgumentNotArrayForFunctionOverload", function () {
        var target = function () { };
        chai_1.assert.throws(function () { return Reflect.decorate(undefined, target, undefined, undefined); }, TypeError);
    });
    it("ThrowsIfTargetArgumentNotFunctionForFunctionOverload", function () {
        var decorators = [];
        var target = {};
        chai_1.assert.throws(function () { return Reflect.decorate(decorators, target, undefined, undefined); }, TypeError);
    });
    it("ThrowsIfDecoratorsArgumentNotArrayForPropertyOverload", function () {
        var target = {};
        var name = "name";
        chai_1.assert.throws(function () { return Reflect.decorate(undefined, target, name, undefined); }, TypeError);
    });
    it("ThrowsIfTargetArgumentNotObjectForPropertyOverload", function () {
        var decorators = [];
        var target = 1;
        var name = "name";
        chai_1.assert.throws(function () { return Reflect.decorate(decorators, target, name, undefined); }, TypeError);
    });
    it("ThrowsIfDecoratorsArgumentNotArrayForPropertyDescriptorOverload", function () {
        var target = {};
        var name = "name";
        var descriptor = {};
        chai_1.assert.throws(function () { return Reflect.decorate(undefined, target, name, descriptor); }, TypeError);
    });
    it("ThrowsIfTargetArgumentNotObjectForPropertyDescriptorOverload", function () {
        var decorators = [];
        var target = 1;
        var name = "name";
        var descriptor = {};
        chai_1.assert.throws(function () { return Reflect.decorate(decorators, target, name, descriptor); }, TypeError);
    });
    it("ExecutesDecoratorsInReverseOrderForFunctionOverload", function () {
        var order = [];
        var decorators = [
            function (target) { order.push(0); },
            function (target) { order.push(1); }
        ];
        var target = function () { };
        Reflect.decorate(decorators, target);
        chai_1.assert.deepEqual(order, [1, 0]);
    });
    it("ExecutesDecoratorsInReverseOrderForPropertyOverload", function () {
        var order = [];
        var decorators = [
            function (target, name) { order.push(0); },
            function (target, name) { order.push(1); }
        ];
        var target = {};
        var name = "name";
        Reflect.decorate(decorators, target, name, undefined);
        chai_1.assert.deepEqual(order, [1, 0]);
    });
    it("ExecutesDecoratorsInReverseOrderForPropertyDescriptorOverload", function () {
        var order = [];
        var decorators = [
            function (target, name) { order.push(0); },
            function (target, name) { order.push(1); }
        ];
        var target = {};
        var name = "name";
        var descriptor = {};
        Reflect.decorate(decorators, target, name, descriptor);
        chai_1.assert.deepEqual(order, [1, 0]);
    });
    it("DecoratorPipelineForFunctionOverload", function () {
        var A = function A() { };
        var B = function B() { };
        var decorators = [
            function (target) { return undefined; },
            function (target) { return A; },
            function (target) { return B; }
        ];
        var target = function () { };
        var result = Reflect.decorate(decorators, target);
        chai_1.assert.strictEqual(result, A);
    });
    it("DecoratorPipelineForPropertyOverload", function () {
        var A = {};
        var B = {};
        var decorators = [
            function (target, name) { return undefined; },
            function (target, name) { return A; },
            function (target, name) { return B; }
        ];
        var target = {};
        var result = Reflect.decorate(decorators, target, "name", undefined);
        chai_1.assert.strictEqual(result, A);
    });
    it("DecoratorPipelineForPropertyDescriptorOverload", function () {
        var A = {};
        var B = {};
        var C = {};
        var decorators = [
            function (target, name) { return undefined; },
            function (target, name) { return A; },
            function (target, name) { return B; }
        ];
        var target = {};
        var result = Reflect.decorate(decorators, target, "name", C);
        chai_1.assert.strictEqual(result, A);
    });
    it("DecoratorCorrectTargetInPipelineForFunctionOverload", function () {
        var sent = [];
        var A = function A() { };
        var B = function B() { };
        var decorators = [
            function (target) { sent.push(target); return undefined; },
            function (target) { sent.push(target); return undefined; },
            function (target) { sent.push(target); return A; },
            function (target) { sent.push(target); return B; }
        ];
        var target = function () { };
        Reflect.decorate(decorators, target);
        chai_1.assert.deepEqual(sent, [target, B, A, A]);
    });
    it("DecoratorCorrectTargetInPipelineForPropertyOverload", function () {
        var sent = [];
        var decorators = [
            function (target, name) { sent.push(target); },
            function (target, name) { sent.push(target); },
            function (target, name) { sent.push(target); },
            function (target, name) { sent.push(target); }
        ];
        var target = {};
        Reflect.decorate(decorators, target, "name");
        chai_1.assert.deepEqual(sent, [target, target, target, target]);
    });
    it("DecoratorCorrectNameInPipelineForPropertyOverload", function () {
        var sent = [];
        var decorators = [
            function (target, name) { sent.push(name); },
            function (target, name) { sent.push(name); },
            function (target, name) { sent.push(name); },
            function (target, name) { sent.push(name); }
        ];
        var target = {};
        Reflect.decorate(decorators, target, "name");
        chai_1.assert.deepEqual(sent, ["name", "name", "name", "name"]);
    });
    it("DecoratorCorrectTargetInPipelineForPropertyDescriptorOverload", function () {
        var sent = [];
        var A = {};
        var B = {};
        var C = {};
        var decorators = [
            function (target, name) { sent.push(target); return undefined; },
            function (target, name) { sent.push(target); return undefined; },
            function (target, name) { sent.push(target); return A; },
            function (target, name) { sent.push(target); return B; }
        ];
        var target = {};
        Reflect.decorate(decorators, target, "name", C);
        chai_1.assert.deepEqual(sent, [target, target, target, target]);
    });
    it("DecoratorCorrectNameInPipelineForPropertyDescriptorOverload", function () {
        var sent = [];
        var A = {};
        var B = {};
        var C = {};
        var decorators = [
            function (target, name) { sent.push(name); return undefined; },
            function (target, name) { sent.push(name); return undefined; },
            function (target, name) { sent.push(name); return A; },
            function (target, name) { sent.push(name); return B; }
        ];
        var target = {};
        Reflect.decorate(decorators, target, "name", C);
        chai_1.assert.deepEqual(sent, ["name", "name", "name", "name"]);
    });
    it("DecoratorCorrectDescriptorInPipelineForPropertyDescriptorOverload", function () {
        var sent = [];
        var A = {};
        var B = {};
        var C = {};
        var decorators = [
            function (target, name, descriptor) { sent.push(descriptor); return undefined; },
            function (target, name, descriptor) { sent.push(descriptor); return undefined; },
            function (target, name, descriptor) { sent.push(descriptor); return A; },
            function (target, name, descriptor) { sent.push(descriptor); return B; }
        ];
        var target = {};
        Reflect.decorate(decorators, target, "name", C);
        chai_1.assert.deepEqual(sent, [C, B, A, A]);
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVmbGVjdC1kZWNvcmF0ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInJlZmxlY3QtZGVjb3JhdGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsMEVBQTBFOzs7QUFFMUUsc0JBQW9CO0FBQ3BCLDZCQUE4QjtBQUU5QixRQUFRLENBQUMsa0JBQWtCLEVBQUU7SUFDekIsRUFBRSxDQUFDLHVEQUF1RCxFQUFFO1FBQ3hELElBQUksTUFBTSxHQUFHLGNBQWEsQ0FBQyxDQUFDO1FBQzVCLGFBQU0sQ0FBQyxNQUFNLENBQUMsY0FBTSxPQUFBLE9BQU8sQ0FBQyxRQUFRLENBQUMsU0FBUyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsU0FBUyxDQUFDLEVBQXpELENBQXlELEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDOUYsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsc0RBQXNELEVBQUU7UUFDdkQsSUFBSSxVQUFVLEdBQTZELEVBQUUsQ0FBQztRQUM5RSxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDaEIsYUFBTSxDQUFDLE1BQU0sQ0FBQyxjQUFNLE9BQUEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxTQUFTLENBQUMsRUFBMUQsQ0FBMEQsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUMvRixDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyx1REFBdUQsRUFBRTtRQUN4RCxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDaEIsSUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDO1FBQ2xCLGFBQU0sQ0FBQyxNQUFNLENBQUMsY0FBTSxPQUFBLE9BQU8sQ0FBQyxRQUFRLENBQUMsU0FBUyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsU0FBUyxDQUFDLEVBQXBELENBQW9ELEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDekYsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsb0RBQW9ELEVBQUU7UUFDckQsSUFBSSxVQUFVLEdBQTZELEVBQUUsQ0FBQztRQUM5RSxJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDZixJQUFJLElBQUksR0FBRyxNQUFNLENBQUM7UUFDbEIsYUFBTSxDQUFDLE1BQU0sQ0FBQyxjQUFNLE9BQUEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxTQUFTLENBQUMsRUFBckQsQ0FBcUQsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUMxRixDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxpRUFBaUUsRUFBRTtRQUNsRSxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDaEIsSUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDO1FBQ2xCLElBQUksVUFBVSxHQUFHLEVBQUUsQ0FBQztRQUNwQixhQUFNLENBQUMsTUFBTSxDQUFDLGNBQU0sT0FBQSxPQUFPLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLFVBQVUsQ0FBQyxFQUFyRCxDQUFxRCxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQzFGLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLDhEQUE4RCxFQUFFO1FBQy9ELElBQUksVUFBVSxHQUE2RCxFQUFFLENBQUM7UUFDOUUsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQ2YsSUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDO1FBQ2xCLElBQUksVUFBVSxHQUFHLEVBQUUsQ0FBQztRQUNwQixhQUFNLENBQUMsTUFBTSxDQUFDLGNBQU0sT0FBQSxPQUFPLENBQUMsUUFBUSxDQUFDLFVBQVUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLFVBQVUsQ0FBQyxFQUF0RCxDQUFzRCxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQzNGLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLHFEQUFxRCxFQUFFO1FBQ3RELElBQUksS0FBSyxHQUFhLEVBQUUsQ0FBQztRQUN6QixJQUFJLFVBQVUsR0FBRztZQUNiLFVBQUMsTUFBZ0IsSUFBYSxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM5QyxVQUFDLE1BQWdCLElBQWEsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDakQsQ0FBQztRQUNGLElBQUksTUFBTSxHQUFHLGNBQWEsQ0FBQyxDQUFDO1FBQzVCLE9BQU8sQ0FBQyxRQUFRLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ3JDLGFBQU0sQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDcEMsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMscURBQXFELEVBQUU7UUFDdEQsSUFBSSxLQUFLLEdBQWEsRUFBRSxDQUFDO1FBQ3pCLElBQUksVUFBVSxHQUFHO1lBQ2IsVUFBQyxNQUFjLEVBQUUsSUFBcUIsSUFBYSxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNuRSxVQUFDLE1BQWMsRUFBRSxJQUFxQixJQUFhLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3RFLENBQUM7UUFDRixJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDaEIsSUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDO1FBQ2xCLE9BQU8sQ0FBQyxRQUFRLENBQUMsVUFBVSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFDdEQsYUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNwQyxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQywrREFBK0QsRUFBRTtRQUNoRSxJQUFJLEtBQUssR0FBYSxFQUFFLENBQUM7UUFDekIsSUFBSSxVQUFVLEdBQUc7WUFDYixVQUFDLE1BQWMsRUFBRSxJQUFxQixJQUFhLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ25FLFVBQUMsTUFBYyxFQUFFLElBQXFCLElBQWEsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDdEUsQ0FBQztRQUNGLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUNoQixJQUFJLElBQUksR0FBRyxNQUFNLENBQUM7UUFDbEIsSUFBSSxVQUFVLEdBQUcsRUFBRSxDQUFDO1FBQ3BCLE9BQU8sQ0FBQyxRQUFRLENBQUMsVUFBVSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFDdkQsYUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNwQyxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxzQ0FBc0MsRUFBRTtRQUN2QyxJQUFJLENBQUMsR0FBRyxlQUFxQixDQUFDLENBQUM7UUFDL0IsSUFBSSxDQUFDLEdBQUcsZUFBcUIsQ0FBQyxDQUFDO1FBQy9CLElBQUksVUFBVSxHQUFHO1lBQ2IsVUFBQyxNQUFnQixJQUFZLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ2hELFVBQUMsTUFBZ0IsSUFBWSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN4QyxVQUFDLE1BQWdCLElBQVksTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDM0MsQ0FBQztRQUNGLElBQUksTUFBTSxHQUFHLGNBQW9CLENBQUMsQ0FBQztRQUNuQyxJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLFVBQVUsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUNsRCxhQUFNLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNsQyxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxzQ0FBc0MsRUFBRTtRQUN2QyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDWCxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDWCxJQUFJLFVBQVUsR0FBRztZQUNiLFVBQUMsTUFBYyxFQUFFLElBQXFCLElBQVksTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDckUsVUFBQyxNQUFjLEVBQUUsSUFBcUIsSUFBWSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM3RCxVQUFDLE1BQWMsRUFBRSxJQUFxQixJQUFZLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2hFLENBQUM7UUFDRixJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDaEIsSUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxTQUFTLENBQUMsQ0FBQztRQUNyRSxhQUFNLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNsQyxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxnREFBZ0QsRUFBRTtRQUNqRCxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDWCxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDWCxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDWCxJQUFJLFVBQVUsR0FBRztZQUNiLFVBQUMsTUFBYyxFQUFFLElBQXFCLElBQVksTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDckUsVUFBQyxNQUFjLEVBQUUsSUFBcUIsSUFBWSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM3RCxVQUFDLE1BQWMsRUFBRSxJQUFxQixJQUFZLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2hFLENBQUM7UUFDRixJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDaEIsSUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztRQUM3RCxhQUFNLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNsQyxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxxREFBcUQsRUFBRTtRQUN0RCxJQUFJLElBQUksR0FBZSxFQUFFLENBQUM7UUFDMUIsSUFBSSxDQUFDLEdBQUcsZUFBcUIsQ0FBQyxDQUFDO1FBQy9CLElBQUksQ0FBQyxHQUFHLGVBQXFCLENBQUMsQ0FBQztRQUMvQixJQUFJLFVBQVUsR0FBRztZQUNiLFVBQUMsTUFBZ0IsSUFBWSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDbkUsVUFBQyxNQUFnQixJQUFZLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUNuRSxVQUFDLE1BQWdCLElBQVksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzNELFVBQUMsTUFBZ0IsSUFBWSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDOUQsQ0FBQztRQUNGLElBQUksTUFBTSxHQUFHLGNBQW9CLENBQUMsQ0FBQztRQUNuQyxPQUFPLENBQUMsUUFBUSxDQUFDLFVBQVUsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUNyQyxhQUFNLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDOUMsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMscURBQXFELEVBQUU7UUFDdEQsSUFBSSxJQUFJLEdBQWEsRUFBRSxDQUFDO1FBQ3hCLElBQUksVUFBVSxHQUFHO1lBQ2IsVUFBQyxNQUFjLEVBQUUsSUFBcUIsSUFBWSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN0RSxVQUFDLE1BQWMsRUFBRSxJQUFxQixJQUFZLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3RFLFVBQUMsTUFBYyxFQUFFLElBQXFCLElBQVksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdEUsVUFBQyxNQUFjLEVBQUUsSUFBcUIsSUFBWSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUN6RSxDQUFDO1FBQ0YsSUFBSSxNQUFNLEdBQUcsRUFBRyxDQUFDO1FBQ2pCLE9BQU8sQ0FBQyxRQUFRLENBQUMsVUFBVSxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztRQUM3QyxhQUFNLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDN0QsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsbURBQW1ELEVBQUU7UUFDcEQsSUFBSSxJQUFJLEdBQXdCLEVBQUUsQ0FBQztRQUNuQyxJQUFJLFVBQVUsR0FBRztZQUNiLFVBQUMsTUFBYyxFQUFFLElBQXFCLElBQVksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDcEUsVUFBQyxNQUFjLEVBQUUsSUFBcUIsSUFBWSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNwRSxVQUFDLE1BQWMsRUFBRSxJQUFxQixJQUFZLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3BFLFVBQUMsTUFBYyxFQUFFLElBQXFCLElBQVksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDdkUsQ0FBQztRQUNGLElBQUksTUFBTSxHQUFHLEVBQUcsQ0FBQztRQUNqQixPQUFPLENBQUMsUUFBUSxDQUFDLFVBQVUsRUFBRSxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDN0MsYUFBTSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQzdELENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLCtEQUErRCxFQUFFO1FBQ2hFLElBQUksSUFBSSxHQUFhLEVBQUUsQ0FBQztRQUN4QixJQUFJLENBQUMsR0FBRyxFQUFHLENBQUM7UUFDWixJQUFJLENBQUMsR0FBRyxFQUFHLENBQUM7UUFDWixJQUFJLENBQUMsR0FBRyxFQUFHLENBQUM7UUFDWixJQUFJLFVBQVUsR0FBRztZQUNiLFVBQUMsTUFBYyxFQUFFLElBQXFCLElBQVksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ3hGLFVBQUMsTUFBYyxFQUFFLElBQXFCLElBQVksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ3hGLFVBQUMsTUFBYyxFQUFFLElBQXFCLElBQVksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2hGLFVBQUMsTUFBYyxFQUFFLElBQXFCLElBQVksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ25GLENBQUM7UUFDRixJQUFJLE1BQU0sR0FBRyxFQUFHLENBQUM7UUFDakIsT0FBTyxDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNoRCxhQUFNLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDN0QsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsNkRBQTZELEVBQUU7UUFDOUQsSUFBSSxJQUFJLEdBQXdCLEVBQUUsQ0FBQztRQUNuQyxJQUFJLENBQUMsR0FBRyxFQUFHLENBQUM7UUFDWixJQUFJLENBQUMsR0FBRyxFQUFHLENBQUM7UUFDWixJQUFJLENBQUMsR0FBRyxFQUFHLENBQUM7UUFDWixJQUFJLFVBQVUsR0FBRztZQUNiLFVBQUMsTUFBYyxFQUFFLElBQXFCLElBQVksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ3RGLFVBQUMsTUFBYyxFQUFFLElBQXFCLElBQVksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ3RGLFVBQUMsTUFBYyxFQUFFLElBQXFCLElBQVksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzlFLFVBQUMsTUFBYyxFQUFFLElBQXFCLElBQVksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2pGLENBQUM7UUFDRixJQUFJLE1BQU0sR0FBRyxFQUFHLENBQUM7UUFDakIsT0FBTyxDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNoRCxhQUFNLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDN0QsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsbUVBQW1FLEVBQUU7UUFDcEUsSUFBSSxJQUFJLEdBQXlCLEVBQUUsQ0FBQztRQUNwQyxJQUFJLENBQUMsR0FBRyxFQUFHLENBQUM7UUFDWixJQUFJLENBQUMsR0FBRyxFQUFHLENBQUM7UUFDWixJQUFJLENBQUMsR0FBRyxFQUFHLENBQUM7UUFDWixJQUFJLFVBQVUsR0FBRztZQUNiLFVBQUMsTUFBYyxFQUFFLElBQXFCLEVBQUUsVUFBOEIsSUFBWSxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDNUgsVUFBQyxNQUFjLEVBQUUsSUFBcUIsRUFBRSxVQUE4QixJQUFZLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUM1SCxVQUFDLE1BQWMsRUFBRSxJQUFxQixFQUFFLFVBQThCLElBQVksSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3BILFVBQUMsTUFBYyxFQUFFLElBQXFCLEVBQUUsVUFBOEIsSUFBWSxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDdkgsQ0FBQztRQUNGLElBQUksTUFBTSxHQUFHLEVBQUcsQ0FBQztRQUNqQixPQUFPLENBQUMsUUFBUSxDQUFDLFVBQVUsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ2hELGFBQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN6QyxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gUmVmbGVjdC5kZWNvcmF0ZSAoIGRlY29yYXRvcnMsIHRhcmdldCBbLCBwcm9wZXJ0eUtleSBbLCBkZXNjcmlwdG9yXSBdIClcclxuXHJcbmltcG9ydCBcIi4uL1JlZmxlY3RcIjtcclxuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSBcImNoYWlcIjtcclxuXHJcbmRlc2NyaWJlKFwiUmVmbGVjdC5kZWNvcmF0ZVwiLCAoKSA9PiB7XHJcbiAgICBpdChcIlRocm93c0lmRGVjb3JhdG9yc0FyZ3VtZW50Tm90QXJyYXlGb3JGdW5jdGlvbk92ZXJsb2FkXCIsICgpID0+IHtcclxuICAgICAgICBsZXQgdGFyZ2V0ID0gZnVuY3Rpb24oKSB7IH07XHJcbiAgICAgICAgYXNzZXJ0LnRocm93cygoKSA9PiBSZWZsZWN0LmRlY29yYXRlKHVuZGVmaW5lZCwgdGFyZ2V0LCB1bmRlZmluZWQsIHVuZGVmaW5lZCksIFR5cGVFcnJvcik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdChcIlRocm93c0lmVGFyZ2V0QXJndW1lbnROb3RGdW5jdGlvbkZvckZ1bmN0aW9uT3ZlcmxvYWRcIiwgKCkgPT4ge1xyXG4gICAgICAgIGxldCBkZWNvcmF0b3JzOiAoQ2xhc3NEZWNvcmF0b3IgfCBNZXRob2REZWNvcmF0b3IgfCBQcm9wZXJ0eURlY29yYXRvcilbXSA9IFtdO1xyXG4gICAgICAgIGxldCB0YXJnZXQgPSB7fTtcclxuICAgICAgICBhc3NlcnQudGhyb3dzKCgpID0+IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCB1bmRlZmluZWQsIHVuZGVmaW5lZCksIFR5cGVFcnJvcik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdChcIlRocm93c0lmRGVjb3JhdG9yc0FyZ3VtZW50Tm90QXJyYXlGb3JQcm9wZXJ0eU92ZXJsb2FkXCIsICgpID0+IHtcclxuICAgICAgICBsZXQgdGFyZ2V0ID0ge307XHJcbiAgICAgICAgbGV0IG5hbWUgPSBcIm5hbWVcIjtcclxuICAgICAgICBhc3NlcnQudGhyb3dzKCgpID0+IFJlZmxlY3QuZGVjb3JhdGUodW5kZWZpbmVkLCB0YXJnZXQsIG5hbWUsIHVuZGVmaW5lZCksIFR5cGVFcnJvcik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdChcIlRocm93c0lmVGFyZ2V0QXJndW1lbnROb3RPYmplY3RGb3JQcm9wZXJ0eU92ZXJsb2FkXCIsICgpID0+IHtcclxuICAgICAgICBsZXQgZGVjb3JhdG9yczogKENsYXNzRGVjb3JhdG9yIHwgTWV0aG9kRGVjb3JhdG9yIHwgUHJvcGVydHlEZWNvcmF0b3IpW10gPSBbXTtcclxuICAgICAgICBsZXQgdGFyZ2V0ID0gMTtcclxuICAgICAgICBsZXQgbmFtZSA9IFwibmFtZVwiO1xyXG4gICAgICAgIGFzc2VydC50aHJvd3MoKCkgPT4gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIG5hbWUsIHVuZGVmaW5lZCksIFR5cGVFcnJvcik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdChcIlRocm93c0lmRGVjb3JhdG9yc0FyZ3VtZW50Tm90QXJyYXlGb3JQcm9wZXJ0eURlc2NyaXB0b3JPdmVybG9hZFwiLCAoKSA9PiB7XHJcbiAgICAgICAgbGV0IHRhcmdldCA9IHt9O1xyXG4gICAgICAgIGxldCBuYW1lID0gXCJuYW1lXCI7XHJcbiAgICAgICAgbGV0IGRlc2NyaXB0b3IgPSB7fTtcclxuICAgICAgICBhc3NlcnQudGhyb3dzKCgpID0+IFJlZmxlY3QuZGVjb3JhdGUodW5kZWZpbmVkLCB0YXJnZXQsIG5hbWUsIGRlc2NyaXB0b3IpLCBUeXBlRXJyb3IpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoXCJUaHJvd3NJZlRhcmdldEFyZ3VtZW50Tm90T2JqZWN0Rm9yUHJvcGVydHlEZXNjcmlwdG9yT3ZlcmxvYWRcIiwgKCkgPT4ge1xyXG4gICAgICAgIGxldCBkZWNvcmF0b3JzOiAoQ2xhc3NEZWNvcmF0b3IgfCBNZXRob2REZWNvcmF0b3IgfCBQcm9wZXJ0eURlY29yYXRvcilbXSA9IFtdO1xyXG4gICAgICAgIGxldCB0YXJnZXQgPSAxO1xyXG4gICAgICAgIGxldCBuYW1lID0gXCJuYW1lXCI7XHJcbiAgICAgICAgbGV0IGRlc2NyaXB0b3IgPSB7fTtcclxuICAgICAgICBhc3NlcnQudGhyb3dzKCgpID0+IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBuYW1lLCBkZXNjcmlwdG9yKSwgVHlwZUVycm9yKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KFwiRXhlY3V0ZXNEZWNvcmF0b3JzSW5SZXZlcnNlT3JkZXJGb3JGdW5jdGlvbk92ZXJsb2FkXCIsICgpID0+IHtcclxuICAgICAgICBsZXQgb3JkZXI6IG51bWJlcltdID0gW107XHJcbiAgICAgICAgbGV0IGRlY29yYXRvcnMgPSBbXHJcbiAgICAgICAgICAgICh0YXJnZXQ6IEZ1bmN0aW9uKTogdm9pZCA9PiB7IG9yZGVyLnB1c2goMCk7IH0sXHJcbiAgICAgICAgICAgICh0YXJnZXQ6IEZ1bmN0aW9uKTogdm9pZCA9PiB7IG9yZGVyLnB1c2goMSk7IH1cclxuICAgICAgICBdO1xyXG4gICAgICAgIGxldCB0YXJnZXQgPSBmdW5jdGlvbigpIHsgfTtcclxuICAgICAgICBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCk7XHJcbiAgICAgICAgYXNzZXJ0LmRlZXBFcXVhbChvcmRlciwgWzEsIDBdKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KFwiRXhlY3V0ZXNEZWNvcmF0b3JzSW5SZXZlcnNlT3JkZXJGb3JQcm9wZXJ0eU92ZXJsb2FkXCIsICgpID0+IHtcclxuICAgICAgICBsZXQgb3JkZXI6IG51bWJlcltdID0gW107XHJcbiAgICAgICAgbGV0IGRlY29yYXRvcnMgPSBbXHJcbiAgICAgICAgICAgICh0YXJnZXQ6IE9iamVjdCwgbmFtZTogc3RyaW5nIHwgc3ltYm9sKTogdm9pZCA9PiB7IG9yZGVyLnB1c2goMCk7IH0sXHJcbiAgICAgICAgICAgICh0YXJnZXQ6IE9iamVjdCwgbmFtZTogc3RyaW5nIHwgc3ltYm9sKTogdm9pZCA9PiB7IG9yZGVyLnB1c2goMSk7IH1cclxuICAgICAgICBdO1xyXG4gICAgICAgIGxldCB0YXJnZXQgPSB7fTtcclxuICAgICAgICBsZXQgbmFtZSA9IFwibmFtZVwiO1xyXG4gICAgICAgIFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBuYW1lLCB1bmRlZmluZWQpO1xyXG4gICAgICAgIGFzc2VydC5kZWVwRXF1YWwob3JkZXIsIFsxLCAwXSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdChcIkV4ZWN1dGVzRGVjb3JhdG9yc0luUmV2ZXJzZU9yZGVyRm9yUHJvcGVydHlEZXNjcmlwdG9yT3ZlcmxvYWRcIiwgKCkgPT4ge1xyXG4gICAgICAgIGxldCBvcmRlcjogbnVtYmVyW10gPSBbXTtcclxuICAgICAgICBsZXQgZGVjb3JhdG9ycyA9IFtcclxuICAgICAgICAgICAgKHRhcmdldDogT2JqZWN0LCBuYW1lOiBzdHJpbmcgfCBzeW1ib2wpOiB2b2lkID0+IHsgb3JkZXIucHVzaCgwKTsgfSxcclxuICAgICAgICAgICAgKHRhcmdldDogT2JqZWN0LCBuYW1lOiBzdHJpbmcgfCBzeW1ib2wpOiB2b2lkID0+IHsgb3JkZXIucHVzaCgxKTsgfVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgbGV0IHRhcmdldCA9IHt9O1xyXG4gICAgICAgIGxldCBuYW1lID0gXCJuYW1lXCI7XHJcbiAgICAgICAgbGV0IGRlc2NyaXB0b3IgPSB7fTtcclxuICAgICAgICBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwgbmFtZSwgZGVzY3JpcHRvcik7XHJcbiAgICAgICAgYXNzZXJ0LmRlZXBFcXVhbChvcmRlciwgWzEsIDBdKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KFwiRGVjb3JhdG9yUGlwZWxpbmVGb3JGdW5jdGlvbk92ZXJsb2FkXCIsICgpID0+IHtcclxuICAgICAgICBsZXQgQSA9IGZ1bmN0aW9uIEEoKTogdm9pZCB7IH07XHJcbiAgICAgICAgbGV0IEIgPSBmdW5jdGlvbiBCKCk6IHZvaWQgeyB9O1xyXG4gICAgICAgIGxldCBkZWNvcmF0b3JzID0gW1xyXG4gICAgICAgICAgICAodGFyZ2V0OiBGdW5jdGlvbik6IGFueSA9PiB7IHJldHVybiB1bmRlZmluZWQ7IH0sXHJcbiAgICAgICAgICAgICh0YXJnZXQ6IEZ1bmN0aW9uKTogYW55ID0+IHsgcmV0dXJuIEE7IH0sXHJcbiAgICAgICAgICAgICh0YXJnZXQ6IEZ1bmN0aW9uKTogYW55ID0+IHsgcmV0dXJuIEI7IH1cclxuICAgICAgICBdO1xyXG4gICAgICAgIGxldCB0YXJnZXQgPSBmdW5jdGlvbiAoKTogdm9pZCB7IH07XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0KTtcclxuICAgICAgICBhc3NlcnQuc3RyaWN0RXF1YWwocmVzdWx0LCBBKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KFwiRGVjb3JhdG9yUGlwZWxpbmVGb3JQcm9wZXJ0eU92ZXJsb2FkXCIsICgpID0+IHtcclxuICAgICAgICBsZXQgQSA9IHt9O1xyXG4gICAgICAgIGxldCBCID0ge307XHJcbiAgICAgICAgbGV0IGRlY29yYXRvcnMgPSBbXHJcbiAgICAgICAgICAgICh0YXJnZXQ6IE9iamVjdCwgbmFtZTogc3RyaW5nIHwgc3ltYm9sKTogYW55ID0+IHsgcmV0dXJuIHVuZGVmaW5lZDsgfSxcclxuICAgICAgICAgICAgKHRhcmdldDogT2JqZWN0LCBuYW1lOiBzdHJpbmcgfCBzeW1ib2wpOiBhbnkgPT4geyByZXR1cm4gQTsgfSxcclxuICAgICAgICAgICAgKHRhcmdldDogT2JqZWN0LCBuYW1lOiBzdHJpbmcgfCBzeW1ib2wpOiBhbnkgPT4geyByZXR1cm4gQjsgfVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgbGV0IHRhcmdldCA9IHt9O1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwgXCJuYW1lXCIsIHVuZGVmaW5lZCk7XHJcbiAgICAgICAgYXNzZXJ0LnN0cmljdEVxdWFsKHJlc3VsdCwgQSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdChcIkRlY29yYXRvclBpcGVsaW5lRm9yUHJvcGVydHlEZXNjcmlwdG9yT3ZlcmxvYWRcIiwgKCkgPT4ge1xyXG4gICAgICAgIGxldCBBID0ge307XHJcbiAgICAgICAgbGV0IEIgPSB7fTtcclxuICAgICAgICBsZXQgQyA9IHt9O1xyXG4gICAgICAgIGxldCBkZWNvcmF0b3JzID0gW1xyXG4gICAgICAgICAgICAodGFyZ2V0OiBPYmplY3QsIG5hbWU6IHN0cmluZyB8IHN5bWJvbCk6IGFueSA9PiB7IHJldHVybiB1bmRlZmluZWQ7IH0sXHJcbiAgICAgICAgICAgICh0YXJnZXQ6IE9iamVjdCwgbmFtZTogc3RyaW5nIHwgc3ltYm9sKTogYW55ID0+IHsgcmV0dXJuIEE7IH0sXHJcbiAgICAgICAgICAgICh0YXJnZXQ6IE9iamVjdCwgbmFtZTogc3RyaW5nIHwgc3ltYm9sKTogYW55ID0+IHsgcmV0dXJuIEI7IH1cclxuICAgICAgICBdO1xyXG4gICAgICAgIGxldCB0YXJnZXQgPSB7fTtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIFwibmFtZVwiLCBDKTtcclxuICAgICAgICBhc3NlcnQuc3RyaWN0RXF1YWwocmVzdWx0LCBBKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KFwiRGVjb3JhdG9yQ29ycmVjdFRhcmdldEluUGlwZWxpbmVGb3JGdW5jdGlvbk92ZXJsb2FkXCIsICgpID0+IHtcclxuICAgICAgICBsZXQgc2VudDogRnVuY3Rpb25bXSA9IFtdO1xyXG4gICAgICAgIGxldCBBID0gZnVuY3Rpb24gQSgpOiB2b2lkIHsgfTtcclxuICAgICAgICBsZXQgQiA9IGZ1bmN0aW9uIEIoKTogdm9pZCB7IH07XHJcbiAgICAgICAgbGV0IGRlY29yYXRvcnMgPSBbXHJcbiAgICAgICAgICAgICh0YXJnZXQ6IEZ1bmN0aW9uKTogYW55ID0+IHsgc2VudC5wdXNoKHRhcmdldCk7IHJldHVybiB1bmRlZmluZWQ7IH0sXHJcbiAgICAgICAgICAgICh0YXJnZXQ6IEZ1bmN0aW9uKTogYW55ID0+IHsgc2VudC5wdXNoKHRhcmdldCk7IHJldHVybiB1bmRlZmluZWQ7IH0sXHJcbiAgICAgICAgICAgICh0YXJnZXQ6IEZ1bmN0aW9uKTogYW55ID0+IHsgc2VudC5wdXNoKHRhcmdldCk7IHJldHVybiBBOyB9LFxyXG4gICAgICAgICAgICAodGFyZ2V0OiBGdW5jdGlvbik6IGFueSA9PiB7IHNlbnQucHVzaCh0YXJnZXQpOyByZXR1cm4gQjsgfVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgbGV0IHRhcmdldCA9IGZ1bmN0aW9uICgpOiB2b2lkIHsgfTtcclxuICAgICAgICBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCk7XHJcbiAgICAgICAgYXNzZXJ0LmRlZXBFcXVhbChzZW50LCBbdGFyZ2V0LCBCLCBBLCBBXSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdChcIkRlY29yYXRvckNvcnJlY3RUYXJnZXRJblBpcGVsaW5lRm9yUHJvcGVydHlPdmVybG9hZFwiLCAoKSA9PiB7XHJcbiAgICAgICAgbGV0IHNlbnQ6IE9iamVjdFtdID0gW107XHJcbiAgICAgICAgbGV0IGRlY29yYXRvcnMgPSBbXHJcbiAgICAgICAgICAgICh0YXJnZXQ6IE9iamVjdCwgbmFtZTogc3RyaW5nIHwgc3ltYm9sKTogYW55ID0+IHsgc2VudC5wdXNoKHRhcmdldCk7IH0sXHJcbiAgICAgICAgICAgICh0YXJnZXQ6IE9iamVjdCwgbmFtZTogc3RyaW5nIHwgc3ltYm9sKTogYW55ID0+IHsgc2VudC5wdXNoKHRhcmdldCk7IH0sXHJcbiAgICAgICAgICAgICh0YXJnZXQ6IE9iamVjdCwgbmFtZTogc3RyaW5nIHwgc3ltYm9sKTogYW55ID0+IHsgc2VudC5wdXNoKHRhcmdldCk7IH0sXHJcbiAgICAgICAgICAgICh0YXJnZXQ6IE9iamVjdCwgbmFtZTogc3RyaW5nIHwgc3ltYm9sKTogYW55ID0+IHsgc2VudC5wdXNoKHRhcmdldCk7IH1cclxuICAgICAgICBdO1xyXG4gICAgICAgIGxldCB0YXJnZXQgPSB7IH07XHJcbiAgICAgICAgUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIFwibmFtZVwiKTtcclxuICAgICAgICBhc3NlcnQuZGVlcEVxdWFsKHNlbnQsIFt0YXJnZXQsIHRhcmdldCwgdGFyZ2V0LCB0YXJnZXRdKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KFwiRGVjb3JhdG9yQ29ycmVjdE5hbWVJblBpcGVsaW5lRm9yUHJvcGVydHlPdmVybG9hZFwiLCAoKSA9PiB7XHJcbiAgICAgICAgbGV0IHNlbnQ6IChzeW1ib2wgfCBzdHJpbmcpW10gPSBbXTtcclxuICAgICAgICBsZXQgZGVjb3JhdG9ycyA9IFtcclxuICAgICAgICAgICAgKHRhcmdldDogT2JqZWN0LCBuYW1lOiBzdHJpbmcgfCBzeW1ib2wpOiBhbnkgPT4geyBzZW50LnB1c2gobmFtZSk7IH0sXHJcbiAgICAgICAgICAgICh0YXJnZXQ6IE9iamVjdCwgbmFtZTogc3RyaW5nIHwgc3ltYm9sKTogYW55ID0+IHsgc2VudC5wdXNoKG5hbWUpOyB9LFxyXG4gICAgICAgICAgICAodGFyZ2V0OiBPYmplY3QsIG5hbWU6IHN0cmluZyB8IHN5bWJvbCk6IGFueSA9PiB7IHNlbnQucHVzaChuYW1lKTsgfSxcclxuICAgICAgICAgICAgKHRhcmdldDogT2JqZWN0LCBuYW1lOiBzdHJpbmcgfCBzeW1ib2wpOiBhbnkgPT4geyBzZW50LnB1c2gobmFtZSk7IH1cclxuICAgICAgICBdO1xyXG4gICAgICAgIGxldCB0YXJnZXQgPSB7IH07XHJcbiAgICAgICAgUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIFwibmFtZVwiKTtcclxuICAgICAgICBhc3NlcnQuZGVlcEVxdWFsKHNlbnQsIFtcIm5hbWVcIiwgXCJuYW1lXCIsIFwibmFtZVwiLCBcIm5hbWVcIl0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoXCJEZWNvcmF0b3JDb3JyZWN0VGFyZ2V0SW5QaXBlbGluZUZvclByb3BlcnR5RGVzY3JpcHRvck92ZXJsb2FkXCIsICgpID0+IHtcclxuICAgICAgICBsZXQgc2VudDogT2JqZWN0W10gPSBbXTtcclxuICAgICAgICBsZXQgQSA9IHsgfTtcclxuICAgICAgICBsZXQgQiA9IHsgfTtcclxuICAgICAgICBsZXQgQyA9IHsgfTtcclxuICAgICAgICBsZXQgZGVjb3JhdG9ycyA9IFtcclxuICAgICAgICAgICAgKHRhcmdldDogT2JqZWN0LCBuYW1lOiBzdHJpbmcgfCBzeW1ib2wpOiBhbnkgPT4geyBzZW50LnB1c2godGFyZ2V0KTsgcmV0dXJuIHVuZGVmaW5lZDsgfSxcclxuICAgICAgICAgICAgKHRhcmdldDogT2JqZWN0LCBuYW1lOiBzdHJpbmcgfCBzeW1ib2wpOiBhbnkgPT4geyBzZW50LnB1c2godGFyZ2V0KTsgcmV0dXJuIHVuZGVmaW5lZDsgfSxcclxuICAgICAgICAgICAgKHRhcmdldDogT2JqZWN0LCBuYW1lOiBzdHJpbmcgfCBzeW1ib2wpOiBhbnkgPT4geyBzZW50LnB1c2godGFyZ2V0KTsgcmV0dXJuIEE7IH0sXHJcbiAgICAgICAgICAgICh0YXJnZXQ6IE9iamVjdCwgbmFtZTogc3RyaW5nIHwgc3ltYm9sKTogYW55ID0+IHsgc2VudC5wdXNoKHRhcmdldCk7IHJldHVybiBCOyB9XHJcbiAgICAgICAgXTtcclxuICAgICAgICBsZXQgdGFyZ2V0ID0geyB9O1xyXG4gICAgICAgIFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBcIm5hbWVcIiwgQyk7XHJcbiAgICAgICAgYXNzZXJ0LmRlZXBFcXVhbChzZW50LCBbdGFyZ2V0LCB0YXJnZXQsIHRhcmdldCwgdGFyZ2V0XSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdChcIkRlY29yYXRvckNvcnJlY3ROYW1lSW5QaXBlbGluZUZvclByb3BlcnR5RGVzY3JpcHRvck92ZXJsb2FkXCIsICgpID0+IHtcclxuICAgICAgICBsZXQgc2VudDogKHN5bWJvbCB8IHN0cmluZylbXSA9IFtdO1xyXG4gICAgICAgIGxldCBBID0geyB9O1xyXG4gICAgICAgIGxldCBCID0geyB9O1xyXG4gICAgICAgIGxldCBDID0geyB9O1xyXG4gICAgICAgIGxldCBkZWNvcmF0b3JzID0gW1xyXG4gICAgICAgICAgICAodGFyZ2V0OiBPYmplY3QsIG5hbWU6IHN0cmluZyB8IHN5bWJvbCk6IGFueSA9PiB7IHNlbnQucHVzaChuYW1lKTsgcmV0dXJuIHVuZGVmaW5lZDsgfSxcclxuICAgICAgICAgICAgKHRhcmdldDogT2JqZWN0LCBuYW1lOiBzdHJpbmcgfCBzeW1ib2wpOiBhbnkgPT4geyBzZW50LnB1c2gobmFtZSk7IHJldHVybiB1bmRlZmluZWQ7IH0sXHJcbiAgICAgICAgICAgICh0YXJnZXQ6IE9iamVjdCwgbmFtZTogc3RyaW5nIHwgc3ltYm9sKTogYW55ID0+IHsgc2VudC5wdXNoKG5hbWUpOyByZXR1cm4gQTsgfSxcclxuICAgICAgICAgICAgKHRhcmdldDogT2JqZWN0LCBuYW1lOiBzdHJpbmcgfCBzeW1ib2wpOiBhbnkgPT4geyBzZW50LnB1c2gobmFtZSk7IHJldHVybiBCOyB9XHJcbiAgICAgICAgXTtcclxuICAgICAgICBsZXQgdGFyZ2V0ID0geyB9O1xyXG4gICAgICAgIFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBcIm5hbWVcIiwgQyk7XHJcbiAgICAgICAgYXNzZXJ0LmRlZXBFcXVhbChzZW50LCBbXCJuYW1lXCIsIFwibmFtZVwiLCBcIm5hbWVcIiwgXCJuYW1lXCJdKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KFwiRGVjb3JhdG9yQ29ycmVjdERlc2NyaXB0b3JJblBpcGVsaW5lRm9yUHJvcGVydHlEZXNjcmlwdG9yT3ZlcmxvYWRcIiwgKCkgPT4ge1xyXG4gICAgICAgIGxldCBzZW50OiBQcm9wZXJ0eURlc2NyaXB0b3JbXSA9IFtdO1xyXG4gICAgICAgIGxldCBBID0geyB9O1xyXG4gICAgICAgIGxldCBCID0geyB9O1xyXG4gICAgICAgIGxldCBDID0geyB9O1xyXG4gICAgICAgIGxldCBkZWNvcmF0b3JzID0gW1xyXG4gICAgICAgICAgICAodGFyZ2V0OiBPYmplY3QsIG5hbWU6IHN0cmluZyB8IHN5bWJvbCwgZGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yKTogYW55ID0+IHsgc2VudC5wdXNoKGRlc2NyaXB0b3IpOyByZXR1cm4gdW5kZWZpbmVkOyB9LFxyXG4gICAgICAgICAgICAodGFyZ2V0OiBPYmplY3QsIG5hbWU6IHN0cmluZyB8IHN5bWJvbCwgZGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yKTogYW55ID0+IHsgc2VudC5wdXNoKGRlc2NyaXB0b3IpOyByZXR1cm4gdW5kZWZpbmVkOyB9LFxyXG4gICAgICAgICAgICAodGFyZ2V0OiBPYmplY3QsIG5hbWU6IHN0cmluZyB8IHN5bWJvbCwgZGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yKTogYW55ID0+IHsgc2VudC5wdXNoKGRlc2NyaXB0b3IpOyByZXR1cm4gQTsgfSxcclxuICAgICAgICAgICAgKHRhcmdldDogT2JqZWN0LCBuYW1lOiBzdHJpbmcgfCBzeW1ib2wsIGRlc2NyaXB0b3I6IFByb3BlcnR5RGVzY3JpcHRvcik6IGFueSA9PiB7IHNlbnQucHVzaChkZXNjcmlwdG9yKTsgcmV0dXJuIEI7IH1cclxuICAgICAgICBdO1xyXG4gICAgICAgIGxldCB0YXJnZXQgPSB7IH07XHJcbiAgICAgICAgUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIFwibmFtZVwiLCBDKTtcclxuICAgICAgICBhc3NlcnQuZGVlcEVxdWFsKHNlbnQsIFtDLCBCLCBBLCBBXSk7XHJcbiAgICB9KTtcclxufSk7XHJcbiJdfQ==